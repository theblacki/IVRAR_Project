<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/IVRAR_Project/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=IVRAR_Project/livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Week 12 - Mounting the TRB and Remote Control | TeleRollingBoard Parcour - Project Blog</title>
<meta name="keywords" content="">
<meta name="description" content="Mounting the TRB and Remote Control
This week I implemented two new locomotion and interaction features, one being planned since the interim report, the other being another idea from the discussions thereafter.
Flying and Riding on the TeleRollingBoard
One more idea from the report discussions outside the follow-after feature was to be able to fly on top of the thrown board. While I agreed at that time that it would be a nice feature, I did not expect to actually get to trying to implement it. Well, here we are.">
<meta name="author" content="Christian Goebel">
<link rel="canonical" href="http://localhost:1313/IVRAR_Project/posts/week12/">
<link crossorigin="anonymous" href="/IVRAR_Project/assets/css/stylesheet.54405a410796490bc874ab6181fac9b675753cc2b91375d8f882566459eca428.css" integrity="sha256-VEBaQQeWSQvIdKthgfrJtnV1PMK5E3XY&#43;IJWZFnspCg=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/IVRAR_Project/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/IVRAR_Project/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/IVRAR_Project/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/IVRAR_Project/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/IVRAR_Project/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/IVRAR_Project/posts/week12/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/IVRAR_Project/" accesskey="h" title="TeleRollingBoard Parcour - Project Blog (Alt + H)">TeleRollingBoard Parcour - Project Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Week 12 - Mounting the TRB and Remote Control
    </h1>
    <div class="post-meta"><span title='2025-01-18 10:48:22 +0100 CET'>January 18, 2025</span>&nbsp;Â·&nbsp;Christian Goebel

</div>
  </header> 
  <div class="post-content"><h1 id="mounting-the-trb-and-remote-control">Mounting the TRB and Remote Control<a hidden class="anchor" aria-hidden="true" href="#mounting-the-trb-and-remote-control">#</a></h1>
<p>This week I implemented two new locomotion and interaction features, one being planned since the interim report, the other being another idea from the discussions thereafter.</p>
<h2 id="flying-and-riding-on-the-telerollingboard">Flying and Riding on the TeleRollingBoard<a hidden class="anchor" aria-hidden="true" href="#flying-and-riding-on-the-telerollingboard">#</a></h2>
<p>One more idea from the report discussions outside the follow-after feature was to be able to fly on top of the thrown board. While I agreed at that time that it would be a nice feature, I did not expect to actually get to trying to implement it. Well, here we are.</p>
<p>And it was a good idea to leave this feature out until this late. equipped with a method that teleports the player <em>on top of</em> something, my very own, very malleable (for me at least) gravity, drag and friction options and implementation, as well as my newfound experience in using the XR features (especially, in this case, hand positions) gave me a nice head start in the realization of this feature.</p>
<p>Rather, the implementation was comically easy, using the functionality of the default teleport, but without reducing it to a single instance, but happen continually while its button is pressed. Except that I don&rsquo;t play a teleportation sound every frame.</p>
<p>Less straight forward was the ability to influence the flight direction. I wanted it to work somewhat like a glider, where you could move left or right by moving the center of mass, for which i opted to use the center of both hands instead.</p>
<p>That worked only somewhat, however, and I was not able to figure out why the same movement could lead to drastically different outcomes, going to extremes of a move leading to almost no difference in the flight path, to the same move instantly making the board crash into the ground, some hundreds of Unity units away.</p>
<p>After quite some debugging, I dropped the feature with the controller positions as steering interaction, and just used the left controller&rsquo;s analog stick instead. Which works, and deterministically right at that.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">float</span> horizontalInput = OVRInput.Get(OVRInput.Axis2D.PrimaryThumbstick).x;
</span></span><span style="display:flex;"><span>rb.AddForce(flyInputStrength * horizontalInput * transform.right, ForceMode.Force);
</span></span></code></pre></div><p>However, I learned that very day that you could look around by moving said analog sticks - on either controller at that.</p>
<p><em>Good to know, isn&rsquo;t it? I turned myself or my chair all this time&hellip;</em></p>
<p>Unfortunately I did not find out how to deactivate the ability to look around, so the steering is somewhat unusable, but I&rsquo;ll still keep it in the way it is now.</p>
<h2 id="remote-controlling-the-telerollingboard">Remote Controlling the TeleRollingBoard<a hidden class="anchor" aria-hidden="true" href="#remote-controlling-the-telerollingboard">#</a></h2>
<p>A feature I had planned since the very start is the ability to remote control the TeleRollingBoard. While I initially planned to move it with the analog sticks, my experience from the steering made me rethink my approach.</p>
<p>Instead, I implemented the ability to grab with one&rsquo;s left hand and have the board then move the same direction as the player moved their hand - of course, including rotational movement.</p>
<p>First, I wanted to yet again use one of my positions queues, but I soon realized that this heavily restrains the possible movement without having to swoosh around with one&rsquo;s hand like a maniac. Instead, I saved the initial position of the left hand when grabbing the air and use the vector from that position to the current one instead. Well, that said, I still use one of my queues for the rotation - can&rsquo;t quite escape my past, it seems.</p>
<p>The code is much like the computation of the throwing of the TeleRollingBoard, except that it needs to access the parameters and components of the TeleRollingBoard GameObject:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (!initialSet)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    initialSet = <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    initialPosition = transform.position;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>Vector3 movement = (TrbScript.CurrentlyOutsideRange ? <span style="color:#ae81ff">0.2f</span> : <span style="color:#ae81ff">1</span>) * remoteControlSpeed * (transform.position - initialPosition);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (movement.magnitude &gt; TrbScript.maxSpeed * TrbScript.speedSlider.sliderValue) movement = TrbScript.maxSpeed * TrbScript.speedSlider.sliderValue * movement.normalized;
</span></span><span style="display:flex;"><span>Rigidbody rb = teleRollingBoard.GetComponent&lt;Rigidbody&gt;();
</span></span><span style="display:flex;"><span>rb.AddForce(movement, ForceMode.VelocityChange);
</span></span><span style="display:flex;"><span>rb.angularVelocity = <span style="color:#ae81ff">0.4f</span> * remoteControlSpeed * (transform.eulerAngles - oldRotations.Peek()) / nrOldPositions;
</span></span></code></pre></div><p>The end result works nicely, at least it does ever since I reduced the angular velocity change, which were way too powerful before.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/IVRAR_Project/">TeleRollingBoard Parcour - Project Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
